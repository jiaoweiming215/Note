cortex-M3特点：
1.32位RISC处理器
2.哈佛结构
3.3级流水线
4.内嵌中断向量控制器和systick定时器

工作模式：
线程模式运行后台代码
异常模式运行前台代码，中断服务程序

特权级别分为：
用户级指程序运行时受限制
特权级指可以任意访问CPU资源

使用向下生长的满栈模型，采用双堆栈机制：
内存高地址向低地址增长，初始状态堆栈SP指针默认指向最后一个有数据的堆栈单元。
出栈时，SP先递减，再把数据提取到寄存器中。

内核寄存器
低组：R0~R7
高组：R8~R12
LR寄存器：R14用于保存程序返回地址
R15：记录CPU执行到哪条指令
R13：MSP（特权级堆栈） PSP（用户级堆栈）保存堆栈栈顶位置

程序状态寄存器：
运算标志 27~31b 
工作模式 24b Thumb状态 必须置1
异常序号 0~8 

异常屏蔽寄存器：
PRIMASK置1关闭所有可屏蔽的中断，不能相应中断

存储器映射：
Code用于存放可执行代码及常量
SRAM片内RAM，用于存放堆栈、变量

异常和中断处理：
复位、pendsv、systick
当异常发生时：
CPU默认将内核寄存器（xPSR,PC,LR和R0~R3）压栈，从中断向量表取中断入口地址复制到PC寄存器中，更新SP和LR，执行异常处理程序
退出异常时，
执行返回指令 BX LR，恢复之前入栈的寄存器，从原先中断位置继续向下运行。

异常处理：
复位异常：芯片复位默认会从异常向量表里加载PC和SP的值，CPU开始运行
pendsv用于RTOS上下文切换，配置为最低优先级，上下文切换延时到其他的ISR都完成后才处理，并且可以被其他异常/中断抢占。

Cortex-M3使用Thumb-2指令集，长度为16或32位。指令可以带后缀。
存储器访问指令：
LDR/LDRB  把存储器的内容加载到RD寄存器
STR/STRB  把RD寄存器的内容加载到存储器中
CPSID I;关中断
CPSIE I;开中断
BX Rn

